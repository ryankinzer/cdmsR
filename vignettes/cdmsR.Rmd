---
title: "Accessing a Centralized Data Management System with R"
author: "Ryan N. Kinzer"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Accessing a Centralized Data Management System with R}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


```{r eval = FALSE}
if(!require(cdmsR)){
devtools::install_github('ryankinzer/cdmsR')
}
```

```{r}
library(cdmsR)
```

```{r}
username <- 'api_user'
api_key <- "153054453130053281239582410943958241094537726538860542262540750542640375910349488180619663"
cdms_host <- 'https://cdms.nptfisheries.org'
#cdms_host <- 'localhost'
```

```{r}
login_status <- cdmsLogin(username, api_key, cdms_host = cdms_host)
```

```{r}
# get all possible datastores in CDMS
datastores <- getDatastores(cdms_host = "https://cdms.nptfisheries.org")
datastores[,1:2]
```

```{r}
# get all current project in CDMS
projects <- getProjects(cdms_host = "https://cdms.nptfisheries.org")

head(projects[,1:2])
```

```{r}
# get available datasets for Imnaha River Steelhead Abundance Monitoring
project_data <- getProjectDatasets(projectID = 11055, cdms_host = "https://cdms.nptfisheries.org")

head(project_data[,1:4])
```

```{r}
waterbodies <- getWaterbodies(cdms_host = "https://cdms.nptfisheries.org")
head(waterbodies)
```

```{r}
location_type <- getLocationTypes(cdms_host = "https://cdms.nptfisheries.org")
head(location_type)
```

```{r}
# project_info <- getProject(projectID = 11052, cdms_host = "https://cdms.nptfisheries.org")
# head(project_info)
```



```{r}
# get available activities for Imnaha River Steelhead Abundance Monitoring Redd data (datasetID = 4334).
dataset_activities <- getActivities(datasetID = 4334, cdms_host = "https://cdms.nptfisheries.org")

head(dataset_activities[,1:5])
```

```{r}
dataset_headers <- getHeaderRecords(datasetID = 4334, cdms_host = "https://cdms.nptfisheries.org")

head(dataset_headers[,1:5])
```

```{r}
big_bucket <- getDatasetView(datastoreID = 78, projectID = NULL, waterbodyID = NULL, locationID = NULL, cdms_host = "https://cdms.nptfisheries.org")

head(big_bucket)
```
